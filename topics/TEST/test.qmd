---
title: "test"
sidebar: false
engine: knitr
echo: true
---

```{r}

#| warning: false
#| error: false

library("tidyverse", verbose = FALSE)
library("ggplot2")
library("rsdmx")
library("owidR")
library("reticulate")
library("gt")
library("scales", verbose = FALSE)
library("janitor")
library("shiny")
library("plotly")
library("ggiraph")
```

List available resources. This will be in the backend to create the different datasets.

```{r}
#| eval: false

resources <- readSDMX(providerId = "ISTAT", resource = "dataflow") %>% 
  as_tibble()
```

```{r}
#| eval: false

tmp <- readSDMX(
  providerId = "ISTAT",
  resource = "data", 
  flowRef  = "143_497",
  dsd = TRUE
  ) %>% 
  as.data.frame(labels = TRUE)
saveSDMX(tmp, "~/R/OIID/topics/Population and Demographic Change/143_497.RData")
```

```{r}
df <- readSDMX("~/R/OIID/topics/Population and Demographic Change/143_497.RData", isRData = TRUE)
```

```{r}
df %>% 
  mutate(obsTime = obsTime %>% str_c(., "-01-01") %>% as_date()) %>% 
  janitor::clean_names() %>% 
  gt()
```
