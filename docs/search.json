[
  {
    "objectID": "topics/Population and Demographic Change/02_age_structure.html",
    "href": "topics/Population and Demographic Change/02_age_structure.html",
    "title": "Age Structure",
    "section": "",
    "text": "List available resources. This will be in the backend to create the different datasets.\nTITOLO\nbla bla bla\nsiamo vecchi\nbla bla bla\nnon facciamo figli\nbla bla bla\neeeeeeeeh ai tempi miei signora mia\nbla bla bla\nTITOLO 2\n\n\n\n Back to top",
    "crumbs": [
      "Topics",
      "Population and Demographic Change",
      "Age Structure"
    ]
  },
  {
    "objectID": "topics/Health/01_heath_test.html",
    "href": "topics/Health/01_heath_test.html",
    "title": "Health test",
    "section": "",
    "text": "Back to top",
    "crumbs": [
      "Topics",
      "Health",
      "Health test"
    ]
  },
  {
    "objectID": "topics/Poverty and Economic Development/01_economic_growth.html",
    "href": "topics/Poverty and Economic Development/01_economic_growth.html",
    "title": "Economic Growth",
    "section": "",
    "text": "Introduction\nGood health, nutrition, a place to live, education… Many of the things we care most about require goods and services produced by people: the care that nurses and doctors give; the food we eat; the homes we live in; the education that teachers provide.\nResearch & Writing\nHere research and writing.\nCharts\nCite This Work\nUse This Work\n\n\n Back to top",
    "crumbs": [
      "Topics",
      "Poverty and Economic Development",
      "Economic Growth"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Our Italy In Data",
    "section": "",
    "text": "Our Italy In Data draft.\n\n\n\n Back to top"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\nDraft!\n\n\n\n Back to top"
  },
  {
    "objectID": "topics/TEST/test.html",
    "href": "topics/TEST/test.html",
    "title": "test",
    "section": "",
    "text": "Codesource(\"~/R/OIID/topics/function.R\")\nlibrary(tidyverse, verbose = FALSE)\nlibrary(ggplot2)\nlibrary(lubridate)\nlibrary(rsdmx)\nlibrary(owidR)\nlibrary(reticulate)\nlibrary(gt)\nlibrary(scales, verbose = FALSE)\nlibrary(janitor)\nlibrary(shiny)\nlibrary(shinylive)\nlibrary(thematic)\nlibrary(waiter)\nlibrary(plotly)\nlibrary(ggiraph)\nlibrary(fst)\nlibrary(readr)  # For reading and writing CSV files\nlibrary(R.utils)  # For gzip compression\n\n\n\nCode# List available resources. This will be in the backend to create the different datasets.\nurl &lt;- \"http://sdmx.istat.it/SDMXWS/rest/dataflow/\"\ndata &lt;- readSDMX(url) %&gt;% as.data.frame(labels = TRUE)\n\n\n\nCodelibrary(httr)\nlibrary(tidyverse)\nlibrary(rsdmx)\n\n# URL to download data\nurl &lt;- \"https://sdmx.istat.it/SDMXWS/rest/dataflow/\"\n# Fetch the data using rsdmx\nsdmx_data &lt;- readSDMX(url) %&gt;% as_tibble(labels = TRUE)\n\n\nSuicidi\n\nCodeproviders &lt;- getSDMXServiceProviders() %&gt;% as.data.frame(providers)\n\n\n\nCode# import suicide dataset\nsuicide &lt;- read_db(\n  id = \"39_1005\",\n  # dsd = TRUE,\n  path = \"~/R/OIID/topics/TEST/datasets/\",\n  version = \"1.0\"\n  )\n\n# plot suicide dataset \nsuicide_total &lt;- suicide %&gt;% \n  filter(\n    mod_suicidio == \"tutte le voci\" &\n      eta == \"totale\" &\n      paese_cittad == \"Italia\" &\n      istruzione == \"totale\" &\n      terr_res == \"Italia\" & # Totale\n      tipo_dato == \"morti\" &\n      sesso != \"totale\" &\n      stato_civ == \"totale\" &\n      malattie_fisiche == \"tutte le voci\" &\n      malattie_mentali == \"tutte le voci\" &\n      mese_decesso == \"anno\"\n  )\n\nplot_time_series(\n  t = suicide_total,\n  x = suicide_total$year,\n  x_text = \"Anni\",\n  y = suicide_total$value,\n  y_text = \"Numero\",\n  colour = suicide_total$sesso,\n  palette = \"Dark2\",\n  title = \"\",\n  subtitle = \"\",\n  xlabs = \"Anni\",\n  ylabs = \"Numero\",\n  legend_title = \"Sesso\",\n  is_percentage = FALSE\n  )\n\n\n\n\n\nReati\n\nCodefelonies_db &lt;- read_db(\n  id = \"73_58\",\n  dsd = TRUE,\n  path = \"~/R/OIID/topics/TEST/datasets/\",\n  version = \"1.4\"\n  )\n\nfelonies &lt;- felonies_db %&gt;%\n  filter(\n    tipo_reato == \"delitti contro l'incolumità individuale\" |\n      tipo_reato %&gt;% str_detect(\"omicidio\") |\n      tipo_reato %&gt;% str_detect(\"violenza sessuale\") |\n      tipo_reato %&gt;% str_detect(\"violenza privata\")\n    ) %&gt;% \n  filter(\n    interv_reato_sent == \"totale\" &\n      eta_reato == \"totale\" &\n      eta_reatograve == \"totale\" &\n      distr_corteapp == \"tutti i distretti\" &\n      uff_giud == \"tutte le voci\" &\n      itter107 == \"Italia\" &\n      misure_sicur == \"tutte le voci\" &\n      natura_reato == \"tutte le voci\" &\n      precedenti == \"tutte le voci\" &\n      # sesso != \"totale\" &\n      tipo_dato == \"numero di condannati per delitto con sentenza irrevocabile\" &\n      anno_reato == \"tutte le voci\"\n  )\n\n\n\n\nTotale\nOmicidio del Consenziente Consumato\nOmicidio Colposo\nOmicidio Volontario\nOmicidio Volontario Consumato\nOmicidio Volontario Tentato\nOmicidio Preterintenzionale\nViolenza Privata Tentata\nViolenza Privata\nViolenza Sessuale di Gruppo\nViolenza Sessuale\n\n\n\n\nCodefelonies_total &lt;- felonies %&gt;% \n  summarise(\n    value = sum(value),\n    .by = c(year, sesso)\n  )\n# plot\nplot_time_series(\n  t = felonies_total,\n  x = felonies_total$year,\n  x_text = \"Anni\",\n  y = felonies_total$value,\n  y_text = \"Numero\",\n  colour = felonies_total$sesso,\n  palette = \"Dark2\",\n  title = \"Totale dei Reati\",\n  subtitle = \"Serie storica per sesso\",\n  xlabs = \"Anni\",\n  ylabs = \"Valore\",\n  legend_title = \"Sesso\",\n  is_percentage = FALSE\n  )\n\n\n\n\n\n\n\n\nCodeomicidio_consenziente_consumato &lt;- felonies %&gt;% \n  filter(tipo_reato == \"omicidio del consenziente consumato\") %&gt;% \n  summarise(\n    value = sum(value),\n    .by = c(year, sesso)\n  )\n# plot\nplot_time_series(\n  t = omicidio_consenziente_consumato,\n  x = omicidio_consenziente_consumato$year,\n  x_text = \"Anni\",\n  y = omicidio_consenziente_consumato$value,\n  y_text = \"Numero\",\n  colour = omicidio_consenziente_consumato$sesso,\n  palette = \"Dark2\",\n  title = \"Omicidio del consenziente consumato\",\n  subtitle = \"Serie storica per sesso\",\n  xlabs = \"Anni\",\n  ylabs = \"Valore\",\n  legend_title = \"Sesso\",\n  is_percentage = FALSE\n  )\n\n\n\n\n\n\n\n\nCodeomicidio_colposo &lt;- felonies %&gt;% \n  filter(tipo_reato == \"omicidio colposo\") %&gt;% \n  summarise(\n    value = sum(value),\n    .by = c(year, sesso)\n  )\n# plot\nplot_time_series(\n  t = omicidio_colposo,\n  x = omicidio_colposo$year,\n  y = omicidio_colposo$value,\n  x_text = \"Anni\",\n  y_text = \"Numero\",\n  colour = omicidio_colposo$sesso,\n  palette = \"Dark2\",\n  title = \"Omicidio del consenziente consumato\",\n  subtitle = \"Serie storica per sesso\",\n  xlabs = \"Anni\",\n  ylabs = \"Valore\",\n  legend_title = \"Sesso\",\n  is_percentage = FALSE\n  )\n\n\n\n\n\n\n\n\nCodeomicidio_volontario &lt;- felonies %&gt;% \n  filter(tipo_reato == \"omicidio volontario\") %&gt;% \n  summarise(\n    value = sum(value),\n    .by = c(year, sesso)\n  )\n# plot\nplot_time_series(\n  t = omicidio_volontario,\n  x = omicidio_volontario$year,\n  y = omicidio_volontario$value,\n  x_text = \"Anni\",\n  y_text = \"Numero\",\n  colour = omicidio_volontario$sesso,\n  palette = \"Dark2\",\n  title = \"Omicidio volontario\",\n  subtitle = \"Serie storica per sesso\",\n  xlabs = \"Anni\",\n  ylabs = \"Valore\",\n  legend_title = \"Sesso\",\n  is_percentage = FALSE\n  )\n\n\n\n\n\n\n\n\nCodeomicidio_volontario_consumato &lt;- felonies %&gt;% \n  filter(tipo_reato == \"omicidio volontario consumato\") %&gt;% \n  summarise(\n    value = sum(value),\n    .by = c(year, sesso)\n  )\n# plot\nplot_time_series(\n  t = omicidio_volontario_consumato,\n  x = omicidio_volontario_consumato$year,\n  y = omicidio_volontario_consumato$value,\n  x_text = \"Anni\",\n  y_text = \"Numero\",\n  colour = omicidio_volontario_consumato$sesso,\n  palette = \"Dark2\",\n  title = \"Omicidio volontario consumato\",\n  subtitle = \"Serie storica per sesso\",\n  xlabs = \"Anni\",\n  ylabs = \"Valore\",\n  legend_title = \"Sesso\",\n  is_percentage = FALSE\n  )\n\n\n\n\n\n\n\n\nCodeomicidio_volontario_tentato &lt;- felonies %&gt;% \n  filter(tipo_reato == \"omicidio volontario tentato\") %&gt;% \n  summarise(\n    value = sum(value),\n    .by = c(year, sesso)\n  )\n# plot\nplot_time_series(\n  t = omicidio_volontario_tentato,\n  x = omicidio_volontario_tentato$year,\n  y = omicidio_volontario_tentato$value,\n  x_text = \"Anni\",\n  y_text = \"Numero\",\n  colour = omicidio_volontario_tentato$sesso,\n  palette = \"Dark2\",\n  title = \"Omicidio volontario tentato\",\n  subtitle = \"Serie storica per sesso\",\n  xlabs = \"Anni\",\n  ylabs = \"Valore\",\n  legend_title = \"Sesso\",\n  is_percentage = FALSE\n  )\n\n\n\n\n\n\n\n\nCodeomicidio_volontario_preterintenzionale &lt;- felonies %&gt;% \n  filter(tipo_reato == \"omicidio volontario preterintenzionale\") %&gt;% \n  summarise(\n    value = sum(value),\n    .by = c(year, sesso)\n  )\n# plot\nplot_time_series(\n  t = omicidio_volontario_preterintenzionale,\n  x = omicidio_volontario_preterintenzionale$year,\n  y = omicidio_volontario_preterintenzionale$value,\n  x_text = \"Anni\",\n  y_text = \"Numero\",\n  colour = omicidio_volontario_preterintenzionale$sesso,\n  palette = \"Dark2\",\n  title = \"Omicidio volontario preterintenzionale\",\n  subtitle = \"Serie storica per sesso\",\n  xlabs = \"Anni\",\n  ylabs = \"Valore\",\n  legend_title = \"Sesso\",\n  is_percentage = FALSE\n  )\n\n[1] \"Non ci sono dati disponibili.\"\n\n\n\n\n\nCodeviolenza_privata_tentata &lt;- felonies %&gt;% \n  filter(tipo_reato == \"violenza privata tentata\") %&gt;% \n  summarise(\n    value = sum(value),\n    .by = c(year, sesso)\n  )\n# plot\nplot_time_series(\n  t = violenza_privata_tentata,\n  x = violenza_privata_tentata$year,\n  y = violenza_privata_tentata$value,\n  x_text = \"Anni\",\n  y_text = \"Numero\",\n  colour = violenza_privata_tentata$sesso,\n  palette = \"Dark2\",\n  title = \"Violenza Privata Tentata\",\n  subtitle = \"Serie storica per sesso\",\n  xlabs = \"Anni\",\n  ylabs = \"Valore\",\n  legend_title = \"Sesso\",\n  is_percentage = FALSE\n  )\n\n\n\n\n\n\n\n\nCodeviolenza_privata &lt;- felonies %&gt;% \n  filter(tipo_reato == \"violenza privata\") %&gt;% \n  summarise(\n    value = sum(value),\n    .by = c(year, sesso)\n  )\n# plot\nplot_time_series(\n  t = violenza_privata,\n  x = violenza_privata$year,\n  y = violenza_privata$value,\n  x_text = \"Anni\",\n  y_text = \"Numero\",\n  colour = violenza_privata$sesso,\n  palette = \"Dark2\",\n  title = \"Violenza Privata\",\n  subtitle = \"Serie storica per sesso\",\n  xlabs = \"Anni\",\n  ylabs = \"Valore\",\n  legend_title = \"Sesso\",\n  is_percentage = FALSE\n  )\n\n\n\n\n\n\n\n\nCodeviolenza_sessuale_gruppo &lt;- felonies %&gt;% \n  filter(tipo_reato == \"violenza sessuale di gruppo\") %&gt;% \n  summarise(\n    value = sum(value),\n    .by = c(year, sesso)\n  )\n# plot\nplot_time_series(\n  t = violenza_sessuale_gruppo,\n  x = violenza_sessuale_gruppo$year,\n  y = violenza_sessuale_gruppo$value,\n  x_text = \"Anni\",\n  y_text = \"Numero\",\n  colour = violenza_sessuale_gruppo$sesso,\n  palette = \"Dark2\",\n  title = \"Violenza Sessuale di Gruppo\",\n  subtitle = \"Serie storica per sesso\",\n  xlabs = \"Anni\",\n  ylabs = \"Valore\",\n  legend_title = \"Sesso\",\n  is_percentage = FALSE\n  )\n\n\n\n\n\n\n\n\nCodeviolenza_sessuale &lt;- felonies %&gt;% \n  filter(tipo_reato == \"violenza sessuale\") %&gt;% \n  summarise(\n    value = sum(value),\n    .by = c(year, sesso)\n  )\n# plot\nplot_time_series(\n  t = violenza_sessuale,\n  x = violenza_sessuale$year,\n  y = violenza_sessuale$value,\n  x_text = \"Anni\",\n  y_text = \"Numero\",\n  colour = violenza_sessuale$sesso,\n  palette = \"Dark2\",\n  title = \"Violenza Sessuale\",\n  subtitle = \"Serie storica per sesso\",\n  xlabs = \"Anni\",\n  ylabs = \"Valore\",\n  legend_title = \"Sesso\",\n  is_percentage = FALSE\n  )\n\n\n\n\n\n\n\n\nPopolazione\n\nCodepopulation &lt;- read_db(\n  id = \"52_1194\",\n  dsd = TRUE,\n  path = \"~/R/OIID/topics/TEST/datasets/\",\n  version = \"1.5\"\n  )\npopulation_total &lt;- population %&gt;% \n  filter(\n    !is.na(year) &\n    freq == \"annuale\" & \n    cittadinanza == \"totale\" &\n      itter107 == \"Italia\" &\n      classe_eta == \"15-64 anni\" &\n      titolo_studio == \"totale\"\n  ) %&gt;% \n  select(year, sesso, value)\n\n\nTotale in proporzione alla popolazione\n\nCodeomicidi_vs_popolazione &lt;- felonies_total %&gt;% \n  left_join(\n    population_total,\n    by = c(\"year\", \"sesso\"),\n    suffix = c(\"_omicidi\", \"_popolazione\")\n  ) %&gt;% \n  filter(!is.na(value_popolazione)) %&gt;% \n  mutate(pct = value_omicidi / value_popolazione) %&gt;% \n  rename(\n    omicidi = value_omicidi,\n    popolazione = value_popolazione\n    ) %&gt;% \n  select(year, sesso, pct, omicidi, popolazione) %&gt;% \n  pivot_longer(\n    cols = !c(\"year\", \"sesso\"),\n    names_to = \"variabile\",\n    values_to = \"valore\"\n  )\n\n\n#| '!! shinylive warning !!': |\n#|   shinylive does not work in self-contained HTML documents.\n#|   Please set `embed-resources: false` in your metadata.\n#| standalone: true\n#| viewerHeight: 800\n\nsource(\"~/R/OIID/topics/function.R\")\nlibrary(tidyverse, verbose = FALSE)\nlibrary(ggplot2)\nlibrary(lubridate)\nlibrary(rsdmx)\nlibrary(owidR)\nlibrary(reticulate)\nlibrary(gt)\nlibrary(scales, verbose = FALSE)\nlibrary(janitor)\nlibrary(shiny)\nlibrary(shinylive)\nlibrary(thematic)\nlibrary(waiter)\nlibrary(plotly)\nlibrary(ggiraph)\nlibrary(fst)\nlibrary(readr)  # For reading and writing CSV files\nlibrary(R.utils)  # For gzip compression\n\nomicidi_vs_popolazione &lt;- felonies_total %&gt;% \n  left_join(\n    population_total,\n    by = c(\"year\", \"sesso\"),\n    suffix = c(\"_omicidi\", \"_popolazione\")\n  ) %&gt;% \n  filter(!is.na(value_popolazione)) %&gt;% \n  mutate(pct = value_omicidi / value_popolazione) %&gt;% \n  rename(\n    omicidi = value_omicidi,\n    popolazione = value_popolazione\n    ) %&gt;% \n  select(year, sesso, pct, omicidi, popolazione) %&gt;% \n  pivot_longer(\n    cols = !c(\"year\", \"sesso\"),\n    names_to = \"variabile\",\n    values_to = \"valore\"\n  )\n\nui &lt;- fluidPage(\n  sidebarLayout(\n    sidebarPanel(\n      selectizeInput(\n        inputId = \"sesso\",\n        label = \"Sesso\",\n        choices = unique(omicidi_vs_popolazione$sesso),\n        multiple = TRUE,\n        selected = c(\"maschi\", \"femmine\")\n      ),\n      selectizeInput(\n        inputId = \"variabile\",\n        label = \"Variabile\",\n        choices = unique(omicidi_vs_popolazione$variabile),\n        selected = \"value_omicidi\"\n      )\n    ),\n    mainPanel(\n      plotlyOutput(\"plot\", width = \"100%\", height = \"600px\")\n    )\n  )\n)\n\nserver &lt;- function(input, output) {\n\n  data &lt;- reactive({\n    omicidi_vs_popolazione %&gt;% \n      filter(\n        sesso %in% input$sesso &\n          variabile %in% input$variabile\n      )\n  })\n  \n  output$plot &lt;- renderPlotly({\n    \n    g &lt;- ggplot(data(), aes(x = year, y = valore, colour = sesso)) +\n      geom_line() +\n      geom_point() +\n      scale_color_manual(\n        values = c(\"maschi\" = \"#1B9E77\",\n                   \"femmine\" = \"#D95F02\")\n      ) +\n      scale_x_date(\n        date_breaks = \"year\",\n        date_labels = \"%Y\"\n      ) +\n      labs(\n        title = \"Omicidi\",\n        subtitle = \"Per sesso e variabile\",\n        x = \"Anni\",\n        y = input$variabile,\n        color = \"Sesso\"\n      ) +\n      scale_y_continuous(breaks = scales::breaks_pretty(n = 10)) +\n      theme_minimal()\n    ggplotly(g) %&gt;% \n      layout(hovermode = \"x unified\")\n    \n  })\n}\n\nshinyApp(ui = ui, server = server)\n\n\n Back to top",
    "crumbs": [
      "Topics",
      "TEST",
      "test"
    ]
  },
  {
    "objectID": "topics/Population and Demographic Change/01_population_growth.html",
    "href": "topics/Population and Demographic Change/01_population_growth.html",
    "title": "Population Growth",
    "section": "",
    "text": "List available resources. This will be in the backend to create the different datasets.\n\n\nPer sesso - popolazione al 1 gennaio\nShiny\n\n\n\n\n\n\n\n\n\n\nTITOLO\nbla bla bla\nsiamo vecchi\nbla bla bla\nnon facciamo figli\nbla bla bla\neeeeeeeeh ai tempi miei signora mia\nbla bla bla\nTITOLO 2\n\n\n Back to top",
    "crumbs": [
      "Topics",
      "Population and Demographic Change",
      "Population Growth"
    ]
  }
]